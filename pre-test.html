<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>الاختبار التحصيلي القبلي</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Arial, sans-serif; background-color: #f9f9f9; padding: 20px; }
        .container { max-width: 800px; margin: auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); border-top: 5px solid #d9534f; }
        h2 { color: #d9534f; text-align: center; }
        .instructions { background: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 20px; color: #856404; }
        .question { margin-bottom: 20px; padding: 15px; background: #fdfdfd; border: 1px solid #eee; border-radius: 5px; }
        .options label { display: block; margin: 8px 0; cursor: pointer; }
        button { display: block; width: 100%; padding: 15px; background: #28a745; color: white; border: none; font-size: 18px; border-radius: 5px; cursor: pointer; margin-top: 20px; }
        button:hover { background: #218838; }
    </style>
</head>
<body>

    <div class="container">
        <h2>الاختبار التحصيلي</h2>
        <div class="instructions">
            <strong>تعليمات الاختبار:</strong><br>
            يهدف هذا الاختبار إلى قياس مدى تحصيلك في الجوانب المعرفية المرتبطة بالتحول الرقمي. يتكون الاختبار من جزئين (صواب وخطأ، واختيار من متعدد). الرجاء الإجابة على جميع الأسئلة.
        </div>
        
        <form id="testForm"></form>
        <button type="button" onclick="submitTest()">إنهاء الاختبار</button>
    </div>

    <script>
        // مصفوفة الأسئلة (الجزء الأول: صح وخطأ / الجزء الثاني: اختياري)
        const questions = [
            // أسئلة الصواب والخطأ (type: 'tf')
            { id: "q1", type: "tf", text: "1. لا يدعم برنامج Canva تغيير لغة واجهة الاستخدام بعد تسجيل الدخول.", correct: "false" },
            { id: "q2", type: "tf", text: "2. يمكن تعديل أبعاد الشريحة بما يتناسب مع متطلبات العرض من خلال Resize Page.", correct: "true" },
            
            // أسئلة الاختيار من متعدد (type: 'mcq')
            { id: "q11", type: "mcq", text: "11. عند إعداد عرض تقديمي باستخدام Canva، يتميز البرنامج بتوفيره:", options: ["النمذجة الثلاثية.", "السحب والإفلات.", "لغات البرمجة.", "أنظمة التشغيل."], correct: "1" },
            { id: "q12", type: "mcq", text: "12. تعدد صيغ التصدير من خلال Canva يفيد المستخدم في:", options: ["تثبيت حجم الملف.", "تقليل حجم الشرائح.", "تنوع طرق العرض.", "تعديل حجم الخط."], correct: "2" }
        ];

        const form = document.getElementById('testForm');
        
        // رسم الأسئلة في الصفحة
        questions.forEach((q, index) => {
            let html = `<div class="question"><h4>${q.text}</h4><div class="options">`;
            if(q.type === 'tf') {
                html += `<label><input type="radio" name="${q.id}" value="true"> صواب</label>
                         <label><input type="radio" name="${q.id}" value="false"> خطأ</label>`;
            } else {
                q.options.forEach((opt, i) => {
                    html += `<label><input type="radio" name="${q.id}" value="${i}"> ${opt}</label>`;
                });
            }
            html += `</div></div>`;
            form.innerHTML += html;
        });

        function submitTest() {
            let score = 0;
            let user = localStorage.getItem("currentUser");
            
            questions.forEach(q => {
                let selected = document.querySelector(`input[name="${q.id}"]:checked`);
                if(selected && selected.value === q.correct) {
                    score++;
                }
            });

            let percentage = Math.round((score / questions.length) * 100);
            localStorage.setItem(user + "_preTestScore", percentage);
            localStorage.setItem(user + "_preTestDone", "true");
            
            alert(`تم حفظ الإجابات! نتيجتك هي: ${percentage}%\nسيتم تحويلك الآن لمقياس التقبل التكنولوجي.`);
            window.location.href = "survey.html";
        }
    </script>
</body>
</html>
